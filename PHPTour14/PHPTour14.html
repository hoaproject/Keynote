<!DOCTYPE html>

<html>
<head>
  <title>Praspel, un langage de spÃ©cification par contrats (PHPTour'14, Lyon)</title>
  <meta http-equiv="content-type" content="text/html;       charset=utf-8" />
  <meta http-equiv="content-type" content="text/javascript; charset=utf-8" />
  <meta http-equiv="content-type" content="text/css;        charset=utf-8" />

  <link type="text/css" href="http://static.hoa-project.net/Css/Keynote.css" rel="stylesheet" />
  <style>
    .draw line {
        stroke: #000;
        stroke-width: 2;
    }

    .draw circle {
        fill: #000;
        stroke-width: 0;

    }

    .draw rect,
    .draw path {
        fill: none;
        stroke: #000;
        stroke-width: 1;
        stroke-linejoin: round;
    }

    .draw .arrow {
        fill: #000;
    }

    .draw rect {
        stroke-linecap: round;
    }

    text,
    .middleğŸ“Œ {
        text-anchor: middle;
        dominant-baseline: middle;
    }

    .northğŸ“Œ {
        text-anchor: middle;
        dominant-baseline: central;
        transform: translate(0, 1em);
    }

    .north-eastğŸ“Œ {
        text-anchor: end;
        dominant-baseline: central;
        transform: translate(-.5em, 1em);
    }

    .eastğŸ“Œ {
        text-anchor: end;
        dominant-baseline: central;
        transform: translate(-.5em, 0);
    }

    .south-eastğŸ“Œ {
        text-anchor: end;
        dominant-baseline: auto;
        transform: translate(-.5em, -.5em);
    }

    .southğŸ“Œ {
        text-anchor: middle;
        dominant-baseline: auto;
        transform: translate(0, -.5em);
    }

    .south-westğŸ“Œ {
        text-anchor: start;
        dominant-baseline: auto;
        transform: translate(.5em, -.5em);
    }

    .westğŸ“Œ {
        text-anchor: start;
        dominant-baseline: central;
        transform: translate(.5em, 0);
    }

    .north-westğŸ“Œ {
        text-anchor: start;
        dominant-baseline: central;
        transform: translate(.5em, 1em);
    }

    .draw .code-like {
        font-family: Pre;
        font-size: 12pt;
    }
  </style>
</head>
<body>

<script src="http://static.hoa-project.net/Javascript/Hoa.js"></script>

<svg width="0" height="0">
  <defs>
      <marker id="arrowHead"
              viewBox="0 0 10 10" 
              refX="1" refY="5"
              markerWidth="6" 
              markerHeight="6"
              orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrow" />
      </marker>
  </defs>
</svg>

<section>
  <h1>Praspel, un langage de spÃ©cification par contrats</h1>

  <div class="tcenter">
    <img src="http://afup.org/templates/phptourlyon2014/medias/images/logo.png"
         alt="Logo du PHPTour"
         width="300px"
         class="center" />
    <p class="break"><small><time datetime="2014-06-24">24 juin 2014</time></small></p>
  </div>
</section>

<section>
  <h1>Qui sommes-nousÂ ?</h1>

  <p>Ivan EnderlinÂ :</p>
  <ul>
    <li>doctorant en Informatique
        (<a href="http://disc.univ-fcomte.fr/">DISC</a>,
         <a href="http://www.inria.fr/">INRIA</a>)</li>
    <li><em lang="en">leader</em> et dÃ©veloppeur de
        <a href="http://hoa-project.net/">Hoa</a></li>
    <li>contributeur
        <a href="http://php.net/">PHP</a>,
        <a href="http://mozilla.org/">Mozilla</a>,
        <a href="http://debian.org/">Debian</a>,
        <a href="http://atoum.org/">atoum</a>â€¦ open-source</li>
    <li>expert invitÃ© au
        <a href="http://w3.org/">W3C</a> (HTML, CSS et WebApp)</li>
    <li><a href="https://twitter.com/hoaproject">@hoaproject</a>,
        <a href="irc://irc.freenode.net#hoaproject">#hoaproject</a></li>
    <li><a href="http://cv.mnt.io/">Curriculum VitÃ¦</a></li>
  </ul>

  <p class="tcenter break">
    <math>
      <mrow>
        <mtext>ivan.enderlin@</mtext>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd><mtext>hoa-project.net</mtext></mtd>
          </mtr>
          <mtr>
            <mtd><mtext>atoum.org</mtext></mtd>
          </mtr>
          <mtr>
            <mtd><mtext>inria.fr</mtext></mtd>
          </mtr>
        </mtable>
      </mrow>
    </math>
  </p>
</section>

<section>
  <h1>Qui sommes-nousÂ ?</h1>

  <p>Julien BianchiÂ :</p>
  <ul>
    <li>dÃ©veloppeur <a href="http://php.net/">PHP</a> &amp;
        <a href="http://resume.github.io/?jubianchi#mylanguages">â€¦</a></li>
    <li>contributeur <a href="http://atoum.org/">atoum</a></li>
    <li>QA <a href="https://twitter.com/PMSIpilot">@PMSIpilot</a></li>
    <li>campeur
        <a href="irc://irc.freenode.net#hoaproject">#hoaproject</a>,
        <a href="irc://irc.freenode.net##atoum">##atoum</a></li>
  </ul>

  <p class="tcenter break">
  <math>
    <mrow>
      <mtext>@jubianchi</mtext>
      <mo>{</mo>
      <mtable>
        <mtr>
          <mtd><mtext>twitter.com</mtext></mtd>
        </mtr>
        <mtr>
          <mtd><mtext>github.com</mtext></mtd>
        </mtr>
      </mtable>
    </mrow>
  </math>
  <br />
  <math>
    <mrow>
      <mtext>julien.bianchi@</mtext>
      <mo>{</mo>
      <mtable>
        <mtr>
          <mtd><mtext>atoum.org</mtext></mtd>
        </mtr>
        <mtr>
          <mtd><mtext>hoa-project.net</mtext></mtd>
        </mtr>
      </mtable>
    </mrow>
  </math>
  </p>
</section>

<section>
  <h1>DÃ©finitions</h1>

  <div class="incremental">
    <p><em lang="en">System Under Test</em> (<strong>SUT</strong>)Â : systÃ¨me qui
    sera exÃ©cutÃ©</p>
    <div class="break">
      <div class="fleft">
        <ul>
          <li data-item=" ">prÃ©ambule <small>(<em lang="en">given</em>)</small></li>
          <li data-item="+">donnÃ©es <small>(<em lang="en">when</em>)</small></li>
          <li data-item="+">oracle <small>(<em lang="en">then</em>)</small></li>
          <li data-item="="><strong>cas de test</strong></li>
        </ul>
      </div>
      <div class="fright" style="width: 68%">
        <ul>
          <li data-item=":">place le SUT dans un Ã©tat particulier</li>
          <li data-item=":"><strong>test</strong>, exÃ©cute le SUT</li>
          <li data-item=":">Ã©tablit le verdict, est-ce que le produit de
          lâ€™exÃ©cution et lâ€™Ã©tat du SUT aprÃ¨s son exÃ©cution sont ceux attendus ou
          nonÂ ?</li>
        </ul>
      </div>
    </div>
    <p class="break clear">Valeurs du verdictÂ : <span class="ğŸ‘">succÃ¨s</span>,
                                                <span class="ğŸ‘">Ã©chec</span> ou
                                                inconclusif</p>
    <p class="break"><strong>Suite de tests</strong>Â : ensemble de cas de tests</p>
  </div>
</section>

<section>
  <h1>Nature des tests</h1>

  <div class="incremental">
    <div class="schema">
      <svg width="700" height="400" viewBox="60 0 780 480" class="draw incremental">

        <g>
          <line x1="375" y1="250" x2="375" y2="50"
                marker-end="url(#arrowHead)" />

          <text x="375" y="50" class="south-eastğŸ“Œ">Taille du systÃ¨me</text>

          <circle cx="375" cy="210" r="3" />
          <circle cx="375" cy="170" r="3" />
          <circle cx="375" cy="130" r="3" />
          <circle cx="375" cy="90"  r="3" />

          <text x="375" y="210" class="eastğŸ“Œ">unitaire</text>
          <text x="375" y="170" class="eastğŸ“Œ">composant</text>
          <text x="375" y="130" class="eastğŸ“Œ">intÃ©gration</text>
          <text x="375" y="90"  class="eastğŸ“Œ">systÃ¨me</text>
        </g>

        <g>
          <line x1="375" y1="250" x2="650" y2="250"
                marker-end="url(#arrowHead)" />

          <text x="650" y="250" class="north-westğŸ“Œ">Support de</text>
          <text x="650" y="265" class="north-westğŸ“Œ">conception</text>

          <circle cx="465" cy="250" r="3" />
          <circle cx="565" cy="250" r="3" />

          <text x="465" y="235" class="southğŸ“Œ">boÃ®te</text>
          <text x="465" y="250" class="southğŸ“Œ">noire</text>
          <text x="565" y="235" class="southğŸ“Œ">boÃ®te</text>
          <text x="565" y="250" class="southğŸ“Œ">blanche</text>
        </g>

        <g transform="rotate(45 375 250)">
          <line x1="375" y1="250" x2="375" y2="450"
                marker-end="url(#arrowHead)" />

          <text x="375" y="450" class="north-westğŸ“Œ">Type de test</text>

          <circle cx="375" cy="290" r="3" />
          <circle cx="375" cy="330" r="3" />
          <circle cx="375" cy="370" r="3" />
          <circle cx="375" cy="410" r="3" />

          <text x="375" y="290" class="westğŸ“Œ">fonctionnel</text>
          <text x="375" y="330" class="westğŸ“Œ">robustesse</text>
          <text x="375" y="370" class="westğŸ“Œ">performance</text>
          <text x="375" y="410" class="westğŸ“Œ">utilisabilitÃ©</text>
        </g>
      </svg>
    </div>
    <p>NousÂ : test <strong>unitaire</strong>, boÃ®te
       <strong>noire</strong> et <strong>fonctionnel</strong>
       <span class="bibliography"><a href="http://dx.doi.org/10.1007/s10009-003-0128-3">ğŸ“–</a></span></p>
  </div>
</section>

<section>
  <h1><em lang="en">Design by Contract</em></h1>

  <div class="incremental">
    <div>
      <p>ContratÂ :</p>
      <ul>
        <li>inventÃ© par B.Â Meyer en 1992 dans
            <a href="https://en.wikipedia.org/wiki/Eiffel_%28programming_language%29">le
            langage Eiffel</a>
            <span class="bibliography"><a href="http://dl.acm.org/citation.cfm?id=SERIES9753.6876">ğŸ“–</a></span>
            <span class="bibliography"><a href="http://dx.doi.org/10.1007/BFb0022115">ğŸ“–</a></span></li>
        <li>dÃ©crit un <strong>modÃ¨le</strong> en utilisant des
            <strong>annotations</strong></li>
        <li>exprime des contraintes formellesÂ : <strong>prÃ©conditions</strong>,
            <strong>postconditions</strong> et <strong>invariants</strong></li>
      </ul>
    </div>
    <div>
      <ul>
        <li data-item="â€”"><em lang="en">caller</em>Â : Â«Â je m'engage Ã  satisfaire ta
            prÃ©conditionÂ Â»</li>
        <li data-item="â€”"><em lang="en">callee</em>Â : Â«Â je m'engage Ã  Ã©tablir ma
            postconditionÂ Â»</li>
        <li data-item="">invariants satisfaits avant et aprÃ¨s l'exÃ©cution du
            <em lang="en">callee</em></li>
      </ul>
    </div>

    <div id="design_by_contract" class="verbatim schema"></div>
  </div>

  <script>
  Hoa.Document.onReady(function ( ) {

      var paper      = Hoa.Graph(Hoa.$('#design_by_contract'), 800, 150);
      var grid       = paper.grid(0, 0, 800, 150, 5, 1);
      var invariant1 = grid.push(paper.rect(0, 0, 140, 80, 3, 'invariants'));
      var pre        = grid.push(paper.rect(0, 0, 140, 80, 3, 'prÃ©conditions'));
      var method     = grid.push(paper.circle(0, 0, 25));
      var _method    = paper.text(400, 30, 'mÃ©thode');
      var post       = grid.push(paper.rect(0, 0, 140, 80, 3, 'postconditions'));
      var invariant2 = grid.push(paper.rect(0, 0, 140, 80, 3, 'invariants'));

      paper.link.between(invariant1, pre);
      paper.link.between(pre, method);
      paper.link.between(method, post);
      paper.link.between(post, invariant2);
  });
  </script>
</section>

<section>
  <h1>Langages de contrats</h1>

  <p>Chaque Â«Â grandÂ Â» langage de programmation Ã  un langage de contratÂ :</p>
  <ul>
    <li><em lang="en">Java Modeling Language</em> (JML) pour Java
        <span class="bibliography"><a href="http://dx.doi.org/10.1007/978-1-4615-5229-1_12">ğŸ“–</a></span></li>
    <li><em lang="en">ANSI/C Specification Language</em> (ACSL) pour C
        <span class="bibliography"><a href="http://frama-c.com/download/acsl-implementation-Fluorine-20130601.pdf">ğŸ“–</a></span></li>
    <li><em lang="en">Spec#</em> pour C#
        <span class="bibliography"><a href="http://dx.doi.org/10.1007/978-3-540-30569-9_3">ğŸ“–</a></span></li>
    <li><em lang="en">JSConTest</em> pour Javascript
        <span class="bibliography"><a href="http://dx.doi.org/10.5381/jot.2012.11.1.a6">ğŸ“–</a></span></li>
  </ul>
  <p class="break incremental"><span>Pour PHPÂ ?</span> <span class="ğŸ‘">RienÂ !</span></p>
</section>

<section>
  <h1><em lang="en">Contract-based Testing</em></h1>

  <div class="incremental">
    <p>InventÃ© par B. K. Aichernig en 2003
       <span class="bibliography"><a href="http://dx.doi.org/10.1007/978-3-540-40007-3_3">ğŸ“–</a></span></p>

    <div class="break">
      <p>PrincipeÂ :</p>
      <ul>
        <li>utilise les <strong>prÃ©conditions</strong> pour
            <strong>gÃ©nÃ©rer</strong> des donnÃ©es de tests</li>
        <li>utilise les <strong>postconditions</strong> et
            <strong>invariants</strong> pour Ã©tablir le <strong>verdict</strong>
            du test Ã  l'exÃ©cution, grÃ¢ce Ã  un <em lang="en">Runtime Assertion
            Checker</em> (RAC)</li>
      </ul>
    </div>

    <div>
      <p class="break">ProblÃ¨mesÂ :</p>
      <ul>
        <li>contraintes souvent exprimÃ©es avec des formules logiques</li>
        <li><strong>difficile</strong> d'en gÃ©nÃ©rer des donnÃ©es</li>
      </ul>
    </div>
  </div>
</section>

<section>
  <h1>Solutions</h1>

  <p>Faire du <em lang="en">Contract-based Testing</em> en PHP en 3Â Ã©tapes</p>
  <ol>
    <li>un (nouveau) langage de contratsÂ :
        <span class="bibliography"><a href="http://dx.doi.org/10.1007/978-3-642-24580-0_6">ğŸ“–</a></span>
    <ul>
      <li>adapter Ã  PHP</li>
      <li>pragmatique</li>
      <li>facile Ã  utiliser pour le dÃ©veloppeur</li>
      <li>assemblant plusieurs mÃ©thodes de test</li>
    </ul>
    </li>
    <li>des gÃ©nÃ©rateurs de donnÃ©esÂ :
        <span class="bibliography"><a href="http://dx.doi.org/10.1109/ICST.2012.136">ğŸ“–</a></span>
        <span class="bibliography"><a href="http://dx.doi.org/10.1109/ICSTW.2013.80">ğŸ“–</a></span>
    <ul>
      <li>pour tous les types usuels</li>
    </ul>
    </li>
    <li>gÃ©nÃ©rer automatiquement des suites de tests unitaires</li>
  </ol>
</section>

<section>
  <h1>Agenda</h1>

  <ol>
    <li>Praspel et les domaines rÃ©alistes</li>
    <li>GÃ©nÃ©ration automatique de donnÃ©es</li>
    <li>GÃ©nÃ©ration automatique de tests unitaires</li>
    <li>Extension <code>atoum/praspel-extension</code></li>
    <li>Conclusion</li>
  </ol>
</section>

<section class="chapter">
  <h1>1 <span>Praspel et les domainesÂ rÃ©alistes</span></h1>
</section>

<section>
  <h1>Domaines rÃ©alistes</h1>

  <div class="incremental">
    <div>
      <p>NaÃ¯vement, les domaines rÃ©alistesÂ :</p>
      <ul>
        <li><strong>raffinent</strong> les types usuels, comme les entiers, les
            chaÃ®nes de caractÃ¨res, les tableaux etc.</li>
        <li>permettent d'exprimer des donnÃ©es plus <strong>complexes</strong>,
            comme des grammaires, des graphes etc.</li>
      </ul>
    </div>
    <p class="break"><strong>RÃ©aliste</strong> signifie qu'ils sont conÃ§us pour
       spÃ©cifier des domaines de donnÃ©es <strong>pertinents</strong> pour un
       contexte <strong>spÃ©cifique</strong></p>
    <p class="break">ExempleÂ : adresse email</p>
  </div>
</section>

<section>
  <h1>CaractÃ©ristiques</h1>

  <p>ConÃ§us pour rÃ©pondre aux problÃ©matiques du test</p>
  <div class="incremental">
    <p>Ils ont les deux caractÃ©ristiques suivantesÂ :</p>
    <ul class="incremental">
      <li>la <strong>prÃ©dicabilitÃ©</strong> permet de valider qu'une donnÃ©e
          appartient Ã  l'ensemble des valeurs dÃ©crites par le domaine
          rÃ©aliste</li>
      <li>la <strong>gÃ©nÃ©rabilitÃ©</strong> permet de gÃ©nÃ©rer une valeur dÃ©crite
          par le domaine rÃ©aliste</li>
    </ul>
    <p class="break"><strong>TrÃ¨s importantÂ !</strong></p>
  </div>
</section>

<!--
<section>
  <h1>ImplÃ©mentation</h1>

  <p><small>(Dans notre implÃ©mentation,)</small> un domaine rÃ©aliste est une classe</p>
  <p>Les caractÃ©ristiques sont reprÃ©sentÃ©es par les mÃ©thodesÂ :</p>
  <div class="incremental">
    <ul class="incremental">
      <li><code>predicate($q)</code> oÃ¹ <code>$q</code> est la valeur Ã  valider</li>
      <li><code>sample($sampler)</code> oÃ¹ <code>$sampler</code> est un
      <strong>gÃ©nÃ©rateur numÃ©rique</strong>Â :  il gÃ©nÃ¨re uniquement des entiers et
      des rÃ©els, et permet de guider la gÃ©nÃ©ration dâ€™une donnÃ©eÂ ; par exemple,
      le gÃ©nÃ©rateur numÃ©rique est utilisÃ© pour choisir un caractÃ¨re parmi une
      plage de caractÃ¨res donnÃ©e</li>
  </ul>
    <p>Seul gÃ©nÃ©rateur numÃ©rique disponibleÂ : pseudo-alÃ©atoire</p>
  </div>
</section>
-->

<section>
  <h1>HiÃ©rarchie</h1>

  <p>Une classification possibleÂ : <strong>verticale</strong></p>
  <p>HÃ©ritage permet de raffiner les caractÃ©ristiquesÂ :</p>
  <ul>
    <li><code>Color</code> hÃ©rite de <code>String</code></li>
    <li><code>Boundinteger</code> hÃ©rite de <code>Integer</code></li>
    <li>tous sont enfants de la classe <code>Realdom</code></li>
  </ul>
  <p>Univers
     <math class="tex"><msub><mi mathvariant="normal">U</mi><mtext>realdom</mtext></msub></math>Â :</p>

  <svg width="640" height="190" viewBox="0 0 640 190" class="draw">

    <style>
      .fruit {
          stroke-dasharray: 3;
      }

      .structural > rect {
          stroke-width: 2;
      }
    </style>

    <g class="incremental">
      <g>
        <line x1="615" y1="180" x2="615" y2="20" marker-end="url(#arrowHead)" />
        <text x="630" y="95" transform="rotate(90 630 95)">couches</text>
      </g>

      <g>
        <rect x="10" y="130" width="590" height="50" rx="10" ry="10" />
        <text x="285" y="155" class="code-like">undefined</text>
      </g>

      <g>
        <rect  x="10" y="70" width="90" height="50" rx="10" ry="10" />
        <rect x="110" y="70" width="90" height="50" rx="10" ry="10" />
        <rect x="210" y="70" width="90" height="50" rx="10" ry="10" />
        <rect x="310" y="70" width="90" height="50" rx="10" ry="10" />
        <text  x="55" y="95" class="code-like">boolean</text>
        <text x="155" y="95" class="code-like">integer</text>
        <text x="255" y="95" class="code-like">float</text>
        <text x="355" y="95" class="code-like">string</text>
      </g>

      <g class="structural">
        <rect x="410" y="70" width="90" height="50" rx="10" ry="10" />
        <rect x="510" y="70" width="90" height="50" rx="10" ry="10" />
        <text x="455" y="95" class="code-like">array</text>
        <text x="555" y="95" class="code-like">class</text>
      </g>

      <g class="fruit">
        <rect  x="10" y="10" width="290" height="50" rx="10" ry="10" />
        <text x="157" y="35">bibliothÃ¨que standard</text>
      </g>

      <g class="fruit">
        <rect x="310" y="10" width="290" height="50" rx="10" ry="10" />
        <text x="457" y="35">bibliothÃ¨que utilisateur</text>
      </g>
    </g>
  </svg>
</section>

<section>
  <h1>Exemple</h1>

  <pre id="boundinteger"><code class="language-php">class        Boundinteger
  extends    Integer
  implements IRealdom\Interval,
             IRealdom\Finite,
             IRealdom\Nonconvex,
             IRealdom\Enumerable {

    protected $_arguments = [
        'Constinteger lower' => PHP_INT_MIN,
        'Constinteger upper' => PHP_INT_MAX
    ];

    public function predicate ( $q ) {

        return    parent::predicate($q)
               &amp;&amp; $q >= $this['lower']->getConstantValue()
               &amp;&amp; $q &lt;= $this['upper']->getConstantValue();
    }

    public function sample ( $sampler ) {

        return $sampler->getInteger(
            $this['lower']->sample($sampler),
            $this['upper']->sample($sampler)
        );
    }

    // ...
}</code></pre>
  <div class="incremental incremental-overlay">
    <p onincrement="Hoa.$('#boundinteger').hoa.highlightLines('1')">
       ImplÃ©mentationÂ : un domaine rÃ©aliste = une classe</p>
    <p onincrement="Hoa.$('#boundinteger').hoa.highlightLines('2')">
       HiÃ©rarchieÂ : <code>Boundinteger</code> hÃ©rite de <code>Integer</code></p>
    <p onincrement="Hoa.$('#boundinteger').hoa.highlightLines('3-6')">
       ClassificationÂ : caractÃ©risation du domaine rÃ©aliste</p>
    <p onincrement="Hoa.$('#boundinteger').hoa.highlightLines('8-11')">
       ParamÃ¨tresÂ : permet de reprÃ©senter des structures de donnÃ©es complexes
       (structures rÃ©cursivesâ€¦)</p>
    <p onincrement="Hoa.$('#boundinteger').hoa.highlightLines('13-18')">
       CaractÃ©ristique de prÃ©dicabililitÃ©</p>
    <p onincrement="Hoa.$('#boundinteger').hoa.highlightLines('20-26')">
       CaractÃ©ristique de gÃ©nÃ©rabilitÃ©</p>
  </div>
</section>

<!--
<section>
  <h1>ParamÃ¨tres</h1>

  <div class="incremental">
    <div>
      <p><em>A l'instar</em> des fonctions, un domaine rÃ©aliste est
         <strong>paramÃ©trable</strong>Â :</p>
      <ul>
        <li>pour reprÃ©senter des structures de donnÃ©es complexes (tableaux
        imbriquÃ©s, graphes, automates, arbresâ€¦)</li>
        <li>typageÂ :
            <code class="language-php">'Integer size'</code></li>
        <li>multi-typageÂ :
            <code class="language-php">'Integer|Float bigSize'</code></li>
        <li>valeur optionnelleÂ :
            <code class="language-php">'Integer size' => 7</code></li>
        <li>utiliser la valeur par dÃ©fautÂ : avec <code>default</code> ou
            <code>â€¦</code></li>
      </ul>
    </div>
  </div>
</section>
-->

<!--
<section>
  <h1>Classification</h1>

  <p>Classification transversaleÂ : <strong>horizontale</strong></p>
  <p>Interfaces aidant Ã  <strong>caractÃ©riser</strong> les domaines
     rÃ©alistesÂ :</p>
  <ul>
    <li><code>Constant</code>, immuable avec une valeur (<code>42</code> du
    domaine rÃ©aliste <code>Constinteger</code>)</li>
    <li><code>Interval</code>, intervalle avec une borne infÃ©rieure et
    supÃ©rieure (qui peuvent Ãªtre rÃ©duites dynamiquement)</li>
    <li><code>Finite</code>, ensemble de valeurs fini</li>
    <li><code>Nonconvex</code>,  avec des valeurs exclues (des trous)</li>
    <li><code>Enumerable</code>, dont les valeurs peuvent Ãªtre Ã©numÃ©rÃ©es</li>
  </ul>
</section>
-->

<section>
  <h1>BibliothÃ¨que standard</h1>

  <ol style="columns: 3; -moz-columns: 3; -webkit-columns: 3">
    <li><code>Undefined</code></li>
    <li><code>Array</code></li>
    <li><code>Boolean</code></li>
    <li><code>Class</code></li>
    <li><code>Float</code></li>
    <li><code>Integer</code></li>
    <li><code>String</code></li>
    <li><code>Bag</code></li>
    <li><code>Boundfloat</code></li>
    <li><code>Boundinteger</code></li>
    <li><code>Color</code></li>
    <li><code>Constarray</code></li>
    <li><code>Constboolean</code></li>
    <li><code>Constfloat</code></li>
    <li><code>Constinteger</code></li>
    <li><code>Constnull</code></li>
    <li><code>Conststring</code></li>
    <li><code>Date</code></li>
    <li><code>Empty</code></li>
    <li><code>Even</code></li>
    <li><code>Grammar</code></li>
    <li><code>Natural</code></li>
    <li><code>Number</code></li>
    <li><code>Object</code></li>
    <li><code>Odd</code></li>
    <li><code>Regex</code></li>
    <li><code>Smallfloat</code></li>
    <li><code>Smallinteger</code></li>
    <li><code>Timestamp</code></li>
  </ol>
</section>

<section>
  <h1>Praspel</h1>

  <p><em lang="en">PHP Realistic Annotation and SPEcification
     Language</em>Â :</p>
  <ul>
    <li>un langage et un <em lang="en">framework</em> de test Ã  partir de
        <strong>contrats</strong></li>
    <li>un langage d'<strong>annotation</strong> (formellement un
        <em lang="en">Behavioral Interface Specification
        Language</em><span class="bibliography"><a href="http://dl.acm.org/citation.cfm?id=2187678">ğŸ“–</a></span>), Ã©crit
        dans les commentaires <code>/** <em>â€¦</em> */</code></li>
    <li>permet d'exprimer des prÃ©conditions, postconditions et invariants</li>
    <li>inspirÃ© de JML et ACSL, mais inspirÃ© seulement</li>
    <li>utilise intensivement les domaines rÃ©alistes</li>
  </ul>
</section>

<section>
  <h1>Vue gÃ©nÃ©rale</h1>

  <pre id="overview"><code class="language-php">class C {

    /**
     * @invariant I;
     */
    protected $a;

    /**
     * @requires P;
     * @behavior Î± {
     *     @description 'Apply the Î± process.';
     *     @requires P_Î±;
     *     @behavior Î² {
     *         @requires  P_Î±_Î²;
     *         @ensures   Q_Î±_Î²;
     *         @throwable T_Î±_Î²;
     *     }
     * }
     * @behavior Î³ {
     *     @requires P_Î³;
     *     â€¦
     * }
     * @default {
     *     @description 'Apply the fallback process.';
     *     @ensures   Q_D;
     *     @throwable T_D;
     * }
     */
     public function f ( ) { }
}</code></pre>
  <div class="incremental incremental-overlay">
    <p onincrement="Hoa.$('#overview').hoa.highlightLines('4')">
       <code>@invariant</code> exprime un invariant</p>
    <p onincrement="Hoa.$('#overview').hoa.highlightLines('14-16')"></p>
    <p onincrement="Hoa.$('#overview').hoa.highlightLines('14')">
       <code>@requires</code> exprime une prÃ©condition</p>
    <p onincrement="Hoa.$('#overview').hoa.highlightLines('15')">
       <code>@ensures</code> exprime une postcondition normale</p>
    <p onincrement="Hoa.$('#overview').hoa.highlightLines('16')">
       <code>@throwable</code> exprime une postcondition exceptionnelleÂ ;
       de la forme <code>T_C with T_E</code></p>
    <p onincrement="Hoa.$('#overview').hoa.highlightLines('13-17')">
       <code>@behavior</code> exprime un comportement</p>
    <p onincrement="Hoa.$('#overview').hoa.highlightLines('10-18')">
       Les <code>@behavior</code> peuvent s'imbriquer</p>
    <p onincrement="Hoa.$('#overview').hoa.highlightLines('23-27')">
       <code>@default</code> exprime un comportement par dÃ©faut, avec une clause
       <code>@requires</code> implicite</p>
    <p onincrement="Hoa.$('#overview').hoa.highlightLines('11,24')">
       <code>@description</code> dÃ©crit informellement un comportement</p>
  </div>
</section>

<section>
  <h1>Expressions</h1>

  <p><code>P</code>, <code>Q</code> et <code>T_E</code> reprÃ©sente une
  expressionÂ :</p>
  <ul>
    <li>une dÃ©claration</li>
    <li>un prÃ©dicat</li>
    <li>une qualification</li>
  </ul>
  <div class="incremental incremental-overlay">
    <div>
      <p>DÃ©clarationÂ :</p>
      <ul>
        <li><strong>associe</strong> un ou plusieurs domaines rÃ©alistes Ã  une
           variable du SUT (arguments) ou du modÃ¨le (<code>let</code>)</li>
        <li>plusieurs = disjonction de domaines rÃ©alistes</li>
        <li><code>\result</code> reprÃ©sente le rÃ©sultat du SUT</li>
        <li><code>\old(<em>i</em>)</code> reprÃ©sente la valeur de
        <code><em>i</em></code> dans le prÃ©-Ã©tat (avant l'exÃ©cution du SUT)</li>
      </ul>
    </div>
    <div>
      <p>PrÃ©dicatÂ : </p>
      <ul>
        <li>toutes les constructions de Praspel supportent la
            <strong>validation</strong> et la <strong>gÃ©nÃ©ration</strong>
            maisâ€¦</li>
        <li>â€¦ toutes les contraintes ne peuvent pas Ãªtre exprimÃ©es</li>
        <li><code>\pred(<code><em>p</em></code>)</code> oÃ¹
            <code><em>p</em></code> est du code PHP pur (un prÃ©dicat en forme
            normale conjonctive, CNF)</li>
      </ul>
    </div>
    <div>
      <p>QualificationÂ :</p>
      <ul>
        <li>qualifier une donnÃ©e avec un <strong>adjectif</strong></li>
        <li>Â«Â mot-clÃ©Â Â» reprÃ©sentant des contraintes
            <strong>usuelles</strong></li>
        <li>facilite la vie, facile Ã  lire, Ã©vite les erreurs</li>
      </ul>
    </div>
  </div>
</section>

<section>
  <h1>Exemple</h1>

  <pre id="filesystem"><code class="language-php">class Filesystem {

    const SIZE = 1024;

    /**
     * @invariant _usage: boundinteger(0, static::SIZE);
     */
    protected $_usage = 0;

    /**
     * @invariant _map: array([to class('File')], 0..0xffff);
     */
    protected $_map = array();

    /**
     * @ensures \result: this->_usage;
     */
    public function getUsage ( ) { /* â€¦ */ }

    /**
     * @requires file: class('File') and
     *           index: 0..0xffff or void;
     * @behavior full {
     *     @description 'The filesystem is full.';
     *     @requires  \pred('$this->getUsage() + $file->getSize()
     *                           > static::SIZE');
     *     @ensures   \none;
     *     @throwable AllocationException e with
     *                    file->isAttached(): false and
     *                    e->getFilesystem(): this;
     * }
     * @default {
     *     @ensures file->isAttached: true and
     *              \result: boolean();
     * }
     */
    public function store ( File $file, $index = null ) { /* â€¦ */ }
}</code></pre>
  <div class="incremental incremental-overlay">
    <p onincrement="Hoa.$('#filesystem').hoa.highlightLines('6,11,21')">
       Exemple de dÃ©clarations de domaines rÃ©alistes</p>
    <p onincrement="Hoa.$('#filesystem').hoa.highlightLines('22')">
       Exemple d'une disjonction de domaines rÃ©alistes</p>
    <p onincrement="Hoa.$('#filesystem').hoa.highlightLines('16')">
       Le rÃ©sultat est reprÃ©sentÃ© par <code>\result</code></p>
    <p onincrement="Hoa.$('#filesystem').hoa.highlightLines('25-26')">
       Exemple d'un prÃ©dicat</p>
  </div>
</section>

<!--
<section>
  <h1>Description de tableaux</h1>

  <div class="incremental incremental-overlay">
    <div>
      <p>Dans PHP, un tableau est toujours <strong>associatif</strong>
         (<em lang="en">map</em>)Â : collection de paires clÃ©-valeur</p>
      <p class="break">Tableau <strong>homogÃ¨ne</strong>Â :</p>
      <ul>
        <li>toutes les clÃ©s ont le mÃªme typeâ€¦</li>
        <li>â€¦ ainsi que toutes les valeurs</li>
      </ul>
      <p class="break">Tableau <strong>hÃ©tÃ©rogÃ¨ne</strong>Â :</p>
      <ul>
        <li>clÃ©s avec des types potentiellement distinctsâ€¦</li>
        <li>â€¦ tout comme les valeurs</li>
      </ul>
    </div>
    <div>
      <p>Dans Praspel,
         <code>array(<math class="tex"><mi mathvariant="normal">D</mi></math>,
                     <math class="tex"><mi mathvariant="normal">L</mi></math>)</code> oÃ¹Â :</p>
      <ul>
        <li><math class="tex"><mi mathvariant="normal">D</mi></math>
            dÃ©crit les domaines (clÃ©s) et codomaines (valeurs)</li>
        <li><math class="tex"><mi mathvariant="normal">L</mi></math>
            dÃ©crit la longueur du tableau</li>
        <li><math class="tex"><mi mathvariant="normal">D</mi></math>
            est une liste de <strong>descriptions</strong> de paires
            <code>from <math class="tex"><mi mathvariant="normal">K</mi></math>
                  to <math class="tex"><mi mathvariant="normal">V</mi></math></code>, oÃ¹
            <math class="tex"><mi mathvariant="normal">K</mi></math> et
            <math class="tex"><mi mathvariant="normal">V</mi></math>
            sont des disjonctions de domaines rÃ©alistes</li>
      </ul>
      <p>ExemplesÂ :</p>
      <pre id="array"><code>a1: array([to boolean()], 7..42)
a2: array([from 0..5 or 10      to integer()], 7)
a3: array([from 0..10           to boolean(),
           from 20..30          to float()], 7)
a4: array([from 0..10 or 20..30 to boolean() or float()], 7)</code></pre>
      <div class="incremental incremental-overlay">
        <p onincrement="Hoa.$('#array').hoa.highlightLines('1')">
           Tableau homogÃ¨ne de boolÃ©ens, avec une longueur comprise entre 7 et
           42</p>
        <p onincrement="Hoa.$('#array').hoa.highlightLines('2')">
           Tableau homogÃ¨neÂ : longueur 7, clÃ©sÂ : entiers entre 0 et 5 ou 10, et
           valeursÂ : entiers</p>
        <p onincrement="Hoa.$('#array').hoa.highlightLines('3-5')">
           Tableaux hÃ©tÃ©rogÃ¨nesÂ : peuvent contenir <code>(5, true)</code> et
           <code>(25, 4.2)</code> maisâ€¦</p>
        <p>â€¦ <code>a4</code> peut contenir la paire <code>(5, 4.2)</code> alors
           que <code>a3</code> ne peut pas la contenir</p>
      </div>
    </div>
  </div>
</section>
-->

<section class="chapter">
  <h1>2 <span>GÃ©nÃ©ration automatique de donnÃ©es</span></h1>
</section>

<section>
  <h1>GÃ©nÃ©ration standard</h1>

  <p>GÃ©nÃ©ration par dÃ©faut</p>
  <p>Totalement pseudo-alÃ©atoire</p>
  <ol>
    <li>Pour chaque variableÂ :
    <ul>
      <li>sÃ©lection d'un domaine rÃ©aliste dans la disjonction alÃ©atoirement</li>
      <li>appel de la mÃ©thode <code>sample</code>, puis
          <code>predicate</code></li>
    </ul>
    </li>
    <li>Ã‰valuation des <code>\pred(<em>p</em>)</code></li>
  </ol>
  <div class="incremental incremental-overlay break">
    <div>
      <pre><code>@requires i: integer() or void and
          j: float() or boolean() and
          \pred('is_foo() && is_bar()');</code></pre>
    </div>
    <div>
      <pre><code>@requires <mark>i: integer() or void</mark> and
          j: float() or boolean() and
          \pred('is_foo() && is_bar()');</code></pre>
      <p>SÃ©lection de la variable <code>i</code></p>
    </div>
    <div>
      <pre><code>@requires i: <mark>integer()</mark> or void and
          j: float() or boolean() and
          \pred('is_foo() && is_bar()');</code></pre>
      <p>Choix du domaine rÃ©aliste <code>integer</code>Â ; <code>i =
         42</code></p>
    </div>
    <div>
      <pre><code>@requires i: integer() or void and
          <mark>j: float() or boolean()</mark> and
          \pred('is_foo() && is_bar()');</code></pre>
      <p>SÃ©lection de la variable <code>j</code></p>
    </div>
    <div>
      <pre><code>@requires i: integer() or void and
          j: float() or <mark>boolean()</mark> and
          \pred('is_foo() && is_bar()');</code></pre>
      <p>Choix du domaine rÃ©aliste <code>boolean</code>Â ; <code>j =
         true</code></p>
    </div>
    <div>
      <pre><code>@requires i: integer() or void and
          j: float() or boolean() and
          <mark>\pred('is_foo() && is_bar()')</mark>;</code></pre>
      <p>Ã‰valuation du prÃ©dicat</p>
    </div>
  </div>
</section>

<section>
  <h1>GÃ©nÃ©ration de tableaux</h1>

  <p>Dans PHPÂ :</p>
  <ul>
    <li>trÃ¨s utilisÃ©s</li>
    <li>reprÃ©sentent toutes sortes de collections</li>
    <li>associatifs</li>
  </ul>

  <p class="break">Dans PraspelÂ :</p>
  <ul>
    <li>la gÃ©nÃ©ration standard introduit trop de <strong>rejets</strong></li>
    <li>impossible d'exprimer des <strong>contraintes prÃ©cises</strong></li>
    <li>utilisation de la construction <code>\pred(<em>p</em>)</code></li>
  </ul>

  <p class="break">ğŸ‘‰ Processus <strong>dÃ©diÃ©</strong> Ã  la gÃ©nÃ©ration de
     tableaux nÃ©cessaire</p>
</section>

<section>
  <h1>Approche</h1>

  <ol>
    <li>Ã©tude des propriÃ©tÃ©s les plus populaires sur les tableaux (sur plus de
        60 projets, plus 5Â millions de LOC)Â ; retenuesÂ :</p>
        <ul>
          <li><code>count</code></li>
          <li><code>array_key_exists</code></li>
          <li><code>in_array</code></li>
        </ul>
    </li>
    <li><small>(syntaxe)</small> extension de Praspel pour les inclure
        nativement</li>
    <li><small>(sÃ©mantique)</small> transformation en propriÃ©tÃ©s
        ensemblistes</li>
    <li>solveur ensembliste</li>
  </ol>
</section>

<section>
  <h1>Syntaxe des propriÃ©tÃ©s</h1>

  <p>DÃ©claration de tableauÂ :
     <code>a: array(<math class="tex"><mi mathvariant="normal">D</mi></math>,
                    <math class="tex"><mi mathvariant="normal">L</mi></math>)</code></p>

  <div class="incremental incremental-overlay break">
    <div>
      <p>PaireÂ :
         <code>a[<math class="tex"><mi mathvariant="normal">K</mi></math>]:
               <math class="tex"><mi mathvariant="normal">V</mi></math></code></p>
      <ul>
        <li>toute valeur dans
            <math class="tex"><mi mathvariant="normal">K</mi></math> est la clÃ©
            d'une paire dans le tableau <code>a</code></li>
        <li>toute paire dont la clÃ© est dans
            <math class="tex"><mi mathvariant="normal">K</mi></math> a sa valeur
            dans <math class="tex"><mi mathvariant="normal">V</mi></math></li>
      </ul>
      <p>ExempleÂ :</p>
      <pre><code>a[7..8]: true or 42</code></pre>
      <p>Ã©quivaut Ã Â :</p>
      <pre><code class="language-php">   array_key_exists(7, $a)
&amp;&amp; array_key_exists(8, $a)
&amp;&amp; (in_array(true, $a) || in_array(42, $a))
&amp;&amp; ($a[7] === true     || $a[7] === 42)
&amp;&amp; ($a[8] === true     || $a[8] === 42)</code></pre>
    </div>
    <div>
      <p>ClÃ©Â :
         <code>a[<math class="tex"><mi mathvariant="normal">K</mi></math>]: _</code></p>
      <ul>
        <li>toute valeur de
            <math class="tex"><mi mathvariant="normal">K</mi></math> doit Ãªtre
            une clÃ© du tableau <code>a</code></li>
      </ul>
      <p>ExempleÂ :</p>
      <pre><code>a[7..8]: _</code></pre>
      <p>Ã©quivaut Ã Â :</p>
      <pre><code class="language-php">   array_key_exists(7, $a)
&amp;&amp; array_key_exists(8, $a)</code></pre>
    </div>
    <div>
      <p>ValeurÂ :
         <code>a[_]: <math class="tex"><mi mathvariant="normal">V</mi></math></code></p>
      <ul>
        <li>toute valeur de
            <math class="tex"><mi mathvariant="normal">V</mi></math> doit Ãªtre
            une valeur du tableau <code>a</code></li>
      </ul>
      <p>ExempleÂ :</p>
      <pre><code>a[_]: 'foo'</code></pre>
      <p>Ã©quivaut Ã Â :</p>
      <pre><code class="language-php">in_array('foo', $a)</code></pre>
    </div>
    <div>
      <p>UnicitÃ©Â : <code>a is unique</code></p>
      <ul>
        <li>toutes les clÃ©s sont uniques (intrinsÃ¨que au tableau)</li>
        <li>toutes les valeurs sont uniques</li>
      </ul>
      <p>ExempleÂ :</p>
      <pre><code>a is unique</code></pre>
      <p>Ã©quivaut Ã Â :</p>
      <pre><code class="language-php">// for simple cases
count($a) === count(array_unique($a, SORT_REGULAR))</code></pre>
    </div>
    <div>
      <p>Mais aussiâ€¦</p>
      <p><code>a[<math class="tex"><mi mathvariant="normal">K</mi></math>]!:
               <math class="tex"><mi mathvariant="normal">V</mi></math></code></p>
      <ul>
        <li>toute valeur de
            <math class="tex"><mi mathvariant="normal">K</mi></math> est la clÃ©
            d'une paire dans le tableau <code>a</code></li>
        <li>toute paire dont la clÃ© est dans
            <math class="tex"><mi mathvariant="normal">K</mi></math> n'a pas sa
            valeur dans <math class="tex"><mi mathvariant="normal">V</mi></math></li>
      </ul>
      <p><code>a[<math class="tex"><mi mathvariant="normal">K</mi></math>]!: _</code></p>
      <ul>
        <li>aucune paire du tableau <code>a</code> n'a sa clÃ© dans
           <math class="tex"><mi mathvariant="normal">K</mi></math></li>
      </ul>
      <p><code>a[_]!: <math class="tex"><mi mathvariant="normal">V</mi></math></code></p>
      <ul>
        <li>â€¦</li>
      </ul>
    </div>
  </div>
</section>

<section>
  <h1>SÃ©mantique ensembliste</h1>

  <p class="break">Un <em lang="en">Constraint Satisfaction Problem</em> et
     un triplet
     <math class="tex">
       (
       <mi mathvariant="normal">Î£</mi>,
       <mi mathvariant="normal">Î”</mi>,
       <mi mathvariant="normal">Î </mi>
       )
     </math> oÃ¹â€¦</p>
  <div class="incremental">
    <div>
      <p class="break">Les variables
         <math class="tex">
           <mi mathvariant="normal">Ïƒ</mi>
           <mo>âˆˆ</mo>
           <mi mathvariant="normal">Î£</mi>
         </math> sont
         la taille <math class="tex"><mi mathvariant="normal">S</mi></math>,
         les ensembles <math class="tex"><mi mathvariant="normal">X</mi></math> et
         <math class="tex"><mi mathvariant="normal">Y</mi></math>,
         la fonction totale
         <math class="tex"><mi mathvariant="normal">H</mi></math>â€¦</p>
      <p class="break">CardinalitÃ©Â :
         <math class="tex">
           <mi>card</mi>
           (
           <mi mathvariant="normal">X</mi>
           )
           <mo>=</mo>
           <mi mathvariant="normal">S</mi>
         </math>,
         <math class="tex">
           <mi mathvariant="normal">S</mi>
           <mo>â‰¥</mo>
           <mn>0</mn>
         </math>,
         <math class="tex">
           <mi>card</mi>
           (
           <mi mathvariant="normal">X</mi>
           )
           <mo>â‰¥</mo>
           <mi>card</mi>
           (
           <mi mathvariant="normal">Y</mi>
           )
         </math>
         â€¦</p>
      <p class="break">Domaines et co-domainesÂ :
         <math class="tex">
           <mi mathvariant="normal">Y</mi>
           <mo>=</mo>
           <mover accent="true">
             <mi mathvariant="normal">H</mi>
             <mo>^</mo>
           </mover>
           (
           <mi mathvariant="normal">X</mi>
           )
         </math>,
         <math class="tex">
           <mi mathvariant="normal">X</mi>
           <mo>=</mo>
           <munder>
             <mo>âˆª</mo>
             <mrow style="font-size: small">
              <mn>1</mn>
              <mo>â‰¤</mo>
              <mi mathvariant="normal">i</mi>
              <mo>â‰¤</mo>
              <mi mathvariant="normal">j</mi>
             </mrow>
           </munder>
           <msub>
             <mi mathvariant="normal">X</mi>
             <mi mathvariant="normal">i</mi>
           </msub>
         </math>â€¦</p>
      <p class="break">PairesÂ :
         <math class="tex">
           <mi mathvariant="normal">K</mi>
           <mo>âŠ†</mo>
           <mi mathvariant="normal">X</mi>
         </math>,
         <math class="tex">
           <mover accent="true">
             <mi mathvariant="normal">H</mi>
             <mo>^</mo>
           </mover>
           (
           <mi mathvariant="normal">K</mi>
           )
           <mo>âŠ†</mo>
           <mi mathvariant="normal">V</mi>
         </math>,
         <math class="tex">
           <mover accent="true">
             <mi mathvariant="normal">H</mi>
             <mo>^</mo>
           </mover>
           (
           <mi mathvariant="normal">K</mi>
           )
           <mo>âˆ©</mo>
           <mi mathvariant="normal">V</mi>
           <mo>=</mo>
           <mo>âˆ…</mo>
         </math>â€¦
         <span class="bibliography"><a href="http://dx.doi.org/10.1109/ICSTW.2013.80">ğŸ“–</a></span></p>
      <div style="position: absolute;
                  top: 50%;
                  left: 0;
                  right: 0;
                  text-align: center;
                  font-family: Pre;
                  font-size: 6em;
                  font-weigh: bold;
                  color: red;
                  transform: rotate(-45deg)">
        censurÃ©
      </div>
    </div>
  </div>
</section>

<section>
  <h1>Solveur ensembliste</h1>

  <p>Fonctionne en deux Ã©tapesÂ :</p>
  <ol>
    <li>propagation et consistance</li>
    <li><em lang="en">labelling</em></li>
  </ol>
  <p>ExempleÂ :</p>
  <pre><code>length: 0..5 or 10
a     : array([to string('a', 'e', 1)], length)
a[0]  : 'b' or 'c'
a is unique</code></pre>
  <p>a comme solution possibleÂ :</p>
  <div class="incremental incremental-all">
    <pre><code class="language-php">[
    0 => 'c',
    1 => 'd',
    2 => 'a',
    3 => 'e'
]</code></pre>
  </div>
</section>

<section>
  <h1>SynthÃ¨se</h1>

  <p><em lang="en">Solver-based Testing</em></p>
  <div class="incremental">
    <ul class="incremental">
      <li data-item="âœ”ï¸"><span class="ğŸ‘">prÃ©dicabilitÃ©</span>Â : domaine rÃ©aliste
          <code>array</code> avec le solveur</li>
      <li data-item="âœ”ï¸"><span class="ğŸ‘">gÃ©nÃ©rabilitÃ©</span>Â : avec le solveur
          (<em lang="en">labelling</em>)</li>
    </ul>
    <p class="break">Travaux publiÃ©s dans CSTVA 2013
       <span class="bibliography"><a href="http://dx.doi.org/10.1109/ICSTW.2013.80">ğŸ“–</a></span></p>
    <p class="break">ğŸ‘‰ Mission suivanteÂ ? Les chaÃ®nes de caractÃ¨resÂ !</p>
  </div>
</section>

<section>
  <h1>GÃ©nÃ©ration de chaÃ®nes de caractÃ¨res</h1>

  <p>Avec les tableaux, le type le plus utilisÃ©</p>
  <p>ReprÃ©sente des donnÃ©es vastes et <strong>complexes</strong>Â :</p>
  <ul>
    <li>bases de donnÃ©es (requÃªtes SQLâ€¦)</li>
    <li>protocoles de communication (HTTP, WebSocketâ€¦)</li>
    <li>descriptions d'objets ou de documents (XML, JSONâ€¦)</li>
    <li>etc.</li>
  </ul>
  <p class="break">ğŸ‘‰ Moyen rapide et simple de <strong>spÃ©cifier</strong> des
     chaÃ®nes de caractÃ¨res (voire des langages) nÃ©cessaire</p>
</section>

<section>
  <h1>Grammaires</h1>

  <p>En 1956, N.Â Chomsky Ã©tablit une <strong>hiÃ©rarchie</strong> des langages
  formels<span class="bibliography"><a href="http://dx.doi.org/10.1109/TIT.1956.1056813">ğŸ“–</a></span>Â :</p>
  <ol>
    <li>grammaires gÃ©nÃ©rales (<em lang="en">unrestricted grammars</em>)</li>
    <li>grammaires contextuelles (<em lang="en">context-sensitive
        grammars</em>)</li>
    <li>grammaires algÃ©briques (<em lang="en">context-free grammars</em>)</li>
    <li>grammaires rÃ©guliÃ¨res (<em lang="en">regular grammars</em>)</li>
  </ol>
  <p class="break">Exemples deâ€¦</p>
  <ul>
    <li>â€¦ langages rÃ©guliersÂ : expressions rÃ©guliÃ¨res POSIX ou PCRE</li>
    <li>â€¦ langages algÃ©briquesÂ : JavaCC, yacc, <span class="ğŸ‘">PP
        <span class="bibliography"><a href="http://dx.doi.org/10.1109/ICST.2012.136">ğŸ“–</a></span>
        (nouveauÂ !)</span></li>
  </ul>
</section>

<section>
  <h1>Langage PP</h1>

  <p>InformellementÂ : grammaire = lexÃ¨mes + rÃ¨gles</p>
  <div class="incremental incremental-overlay break">
    <div>
      <p>LexÃ¨me (<em lang="en">token</em>)Â : plus petite <strong>unitÃ©
         lexicale</strong> composant un mot (donnÃ©e textuelle)</p>
      <pre><code>%token <em>namespace_in</em>:<em>name</em> <em>value</em> -&gt; <em>namespace_out</em></code></pre>
      <p>ExempleÂ :</p>
      <pre><code class="language-pp">%token number \d+</code></pre>
    </div>
    <div>
      <p>RÃ¨gle (<em lang="en">rule</em>)Â : dÃ©crit l'enchaÃ®nement des lexÃ¨mes les
         uns par rapport aux autres</p>
      <ul>
        <li><code><em>rule</em>()</code>Â : pour <strong>invoquer</strong> une
            rÃ¨gle</li>
        <li><code>&lt;<em>token</em>&gt;</code> et
            <code>::<em>token</em>::</code>Â : pour <strong>dÃ©clarer</strong> un
            lexÃ¨me</li>
        <li><code>|</code>Â : pour une <strong>disjonction</strong> (un
            choix)</li>
        <li><code>(<em>â€¦</em>)</code>Â : pour <strong>grouper</strong></li>
        <li><code><em>e</em>?</code>,
            <code><em>e</em>+</code>,
            <code><em>e</em>*</code> et
            <code><em>e</em>{<em>x</em>,<em>y</em>}</code> pour
            <strong>rÃ©pÃ©ter</strong></li>
        <li><code>#<em>node</em></code> pour crÃ©er un <strong>nÅ“ud</strong></li>
        <li><code><em>token</em>[<em>i</em>]</code> pour
        <strong>unifier</strong></li>
      </ul>
    </div>
  </div>
</section>

<section>
  <h1>Exemple <small>simplifiÃ©</small> avec JSON</h1>

  <p>LexÃ¨mesÂ :</p>
  <pre id="json_tokens" style="max-height: 300px"><code class="language-pp">%skip   space          \s
// Scalars.
%token  true           true
%token  false          false
%token  null           null
// Strings.
%token  quote_         "        -> string
%token  string:string  [^"]+
%token  string:_quote  "        -> default
// Objects.
%token  brace_         {
%token _brace          }
// Arrays.
%token  bracket_       \[
%token _bracket        \]
// Rest.
%token  colon          :
%token  comma          ,
%token  number         \d+</code></pre>
  <p>RÃ¨gles :</p>
  <pre id="json_rules" style="max-height: 50px"><code class="language-pp">value:
    &lt;true> | &lt;false> | &lt;null> | &lt;number> | string() | object() | array()

string:
    ::quote_:: &lt;string> ::_quote::

#object:
    ::brace_:: pair() ( ::comma:: pair() )* ::_brace::

#pair:
    string() ::colon:: value()

#array:
    ::bracket_:: value() ( ::comma:: value() )* ::_bracket::</code></pre>
  <div class="incremental incremental-overlay">
    <span onincrement="Hoa.$('#json_tokens').style.maxHeight = '300px';
                       Hoa.$('#json_rules').style.maxHeight  = '50px';
                       Hoa.$('#json_rules').hoa.highlightLines()"></span>
    <span onincrement="Hoa.$('#json_tokens').style.maxHeight = '50px';
                       Hoa.$('#json_rules').style.maxHeight  = '300px'"></span>
    <span onincrement="Hoa.$('#json_rules').hoa.highlightLines('2')"></span>
    <span onincrement="Hoa.$('#json_rules').hoa.highlightLines('5')"></span>
    <span onincrement="Hoa.$('#json_rules').hoa.highlightLines('8')"></span>
    <span onincrement="Hoa.$('#json_rules').hoa.highlightLines('11')"></span>
    <span onincrement="Hoa.$('#json_rules').hoa.highlightLines('11,2')"></span>
    <span onincrement="Hoa.$('#json_rules').hoa.highlightLines('14')"></span>
  </div>
</section>

<section>
  <h1>Reconnaissance de mots</h1>

  <div id="parsers" class="verbatim schema"></div>
  <script>
  Hoa.Document.onReady(function ( ) {

      var paper    = Hoa.Graph(Hoa.$('#parsers'), 800, 180);
      var grid     = paper.grid(0, 0, 800, 180, 5, 2);
      var word     = grid.push(paper.rect(0, 0, 140, 80, 3, 'mot'), 0, 0);
      var sequence = grid.push(paper.rect(0, 0, 140, 80, 3, 'sÃ©quence'), 2, 0);
      var trace    = grid.push(paper.rect(0, 0, 140, 80, 3, 'rÃ©sultat'), 4, 0);
      grid.push(paper.rect(0, 0, 140, 50, 3, '7 + 42'), 0, 1);
      grid.push(paper.rect(0, 0, 360, 50, 3, '[[7 âŸ¼ â€¦], [+ âŸ¼ â€¦], [42 âŸ¼ â€¦]]'), 2, 1);
      grid.push(paper.rect(0, 0, 140, 50, 3, 'valide/invalide'), 4, 1);

      paper.link.between(word, sequence, 'analyseur lexical');
      paper.link.between(sequence, trace, 'analyseur syntaxique');
  });
  </script>
  <div class="incremental incremental-overlay">
    <div onincrement="Hoa.$$('#parsers > svg > g')[0].classList.remove('downlight');
                      Hoa.$$('#parsers > svg > g')[1].classList.remove('downlight');
                      Hoa.$$('#parsers > svg > g')[2].classList.remove('downlight');
                      Hoa.$$('#parsers > svg > g')[3].classList.remove('downlight');
                      Hoa.$$('#parsers > svg > g')[4].classList.remove('downlight');
                      Hoa.$$('#parsers > svg > g')[5].classList.remove('downlight')"></div>
    <div onincrement="Hoa.$$('#parsers > svg > g')[0].classList.add('downlight');
                      Hoa.$$('#parsers > svg > g')[1].classList.remove('downlight');
                      Hoa.$$('#parsers > svg > g')[2].classList.add('downlight');
                      Hoa.$$('#parsers > svg > g')[3].classList.add('downlight');
                      Hoa.$$('#parsers > svg > g')[4].classList.remove('downlight');
                      Hoa.$$('#parsers > svg > g')[5].classList.add('downlight')">
    <p>Analyseur lexical (<em lang="en">lexer</em>)Â :</p>
    <pre style="height: 280px"><code class="language-shell">$ echo '[1, [1, [2, 3], 5], 8]' | hoa compiler:pp Json.pp 0 --token-sequence
  #  namespace     token name            token value           offset
----------------------------------------------------------------------
  0  default       bracket_              [                          0
  1  default       number                1                          1
  2  default       comma                 ,                          2
  3  default       bracket_              [                          4
  4  default       number                1                          5
  5  default       comma                 ,                          6
  6  default       bracket_              [                          8
  7  default       number                2                          9
  8  default       comma                 ,                         10
  9  default       number                3                         12
 10  default       _bracket              ]                         13
 11  default       comma                 ,                         14
 12  default       number                5                         16
 13  default       _bracket              ]                         17
 14  default       comma                 ,                         18
 15  default       number                8                         20
 16  default       _bracket              ]                         21
 17  default       EOF                                             23</code></pre>
    </div>
    <div onincrement="Hoa.$$('#parsers > svg > g')[0].classList.add('downlight');
                      Hoa.$$('#parsers > svg > g')[1].classList.add('downlight');
                      Hoa.$$('#parsers > svg > g')[2].classList.remove('downlight');
                      Hoa.$$('#parsers > svg > g')[3].classList.add('downlight');
                      Hoa.$$('#parsers > svg > g')[4].classList.add('downlight');
                      Hoa.$$('#parsers > svg > g')[5].classList.remove('downlight')">
      <p>Analyseur syntaxique (<em lang="en">parser</em>)Â :</p>
      <pre><code class="language-shell">$ echo '[1, [1, [2, 3], 5], 8]' | hoa compiler:pp Json.pp 0 --visitor dump
>  #array
>  >  token(number, 1)
>  >  #array
>  >  >  token(number, 1)
>  >  >  #array
>  >  >  >  token(number, 2)
>  >  >  >  token(number, 3)
>  >  >  token(number, 5)
>  >  token(number, 8)</code></pre>
      <p>RÃ©sultat sous forme d'<strong>arbre</strong>Â : <em lang="en">Abstract
         Syntax Tree</em> (AST)</p>
    </div>
  </div>
</section>

<section>
  <h1><em lang="en">Grammar-based Testing</em></h1>

  <p>Grammaires culturellement utilisÃ©es pour valider</p>
  <p class="break">IdÃ©eÂ : les utiliser pour gÃ©nÃ©rer des donnÃ©es
     <span class="bibliography"><a href="http://doi.acm.org/10.1145/1101908.1101969">ğŸ“–</a></span></p>
  <p class="break">PrincipeÂ : parcourir/explorer une grammaire et construire une
     sÃ©quence de lexÃ¨mes</p>
  <div id="grammar_based_testing" class="verbatim schema"></div>
  <script>
  Hoa.Document.onReady(function ( ) {

      var paper    = Hoa.Graph(Hoa.$('#grammar_based_testing'), 800, 180);
      var grid     = paper.grid(0, 0, 800, 180, 5, 2);
      var grammar  = grid.push(paper.rect(0, 0, 140, 80, 3, 'grammaire'), 0, 0);
      var sequence = grid.push(paper.rect(0, 0, 140, 80, 3, 'sÃ©quence'), 2, 0);
      var word     = grid.push(paper.rect(0, 0, 140, 80, 3, 'mot'), 4, 0);
      grid.push(paper.rect(0, 0, 140, 50, 3, 'PP'), 0, 1);
      grid.push(paper.rect(0, 0, 410, 50, 3, '[[number âŸ¼ â€¦], [plus âŸ¼ â€¦], [number âŸ¼ â€¦]]'), 2, 1);
      grid.push(paper.rect(0, 0, 140, 50, 3, '7 + 42'), 4, 1);

      paper.link.between(grammar, sequence, 'gÃ©nÃ©ration');
      paper.link.between(sequence, word, 'concrÃ©tisation');
  });
  </script>
  <p>Trois algorithmes pour la gÃ©nÃ©ration <small>(construction de la
     sÃ©quence)</small></p>
  <p>Un algorithme pour la concrÃ©tisation</p>
</section>

<section>
  <h1>Algorithmes de gÃ©nÃ©ration</h1>

  <div class="incremental incremental-overlay">
    <div>
      <p>GÃ©nÃ©ration <strong>alÃ©atoire et uniforme</strong>, basÃ© sur les travaux
      de P.Â Flajolet<span class="bibliography"><a href="http://dx.doi.org/10.1016/0304-3975(94)90226-7">ğŸ“–</a></span>Â :</p>
      <ul>
        <li data-item="ğŸ‘">rapide pour des petites donnÃ©es, grande diversitÃ©,
            taille de la sÃ©quence
            <math class="tex"><mi mathvariant="normal">n</mi></math> fixe</li>
        <li data-item="ğŸ‘">prÃ©-calcul exponentiel mais gÃ©nÃ©ration trÃ¨s
            rapide</li>
      </ul>
      <p class="break">Exemples <small>(gÃ©nÃ©rations + concrÃ©tisations)</small> avec
         <math class="tex"><mi mathvariant="normal">n</mi><mo>=</mo><mn>5</mn></math>Â :</p>
      <pre><code class="language-json">[null, true]</code></pre>
      <pre><code class="language-json">[[false]]</code></pre>
      <pre><code class="language-json">[-2, "oD"]</code></pre>
    </div>
    <div>
      <p>GÃ©nÃ©ration <strong>exhaustive bornÃ©e</strong>Â :
         <span class="bibliography"><a href="http://doi.ieeecomputersociety.org/10.1109/ASE.2001.989787">ğŸ“–</a></span>
         <span class="bibliography"><a href="http://doi.acm.org/10.1145/1007512.1007531">ğŸ“–</a></span></p>
      <ul>
        <li data-item="ğŸ‘">rapide pour des petites donnÃ©es, exhaustivitÃ©
            <small>(forme de preuve)</small></li>
        <li data-item="ğŸ‘">nombre exponentiel de donnÃ©es</li>
      </ul>
      <p class="break">Exemple <small>(gÃ©nÃ©ration + concrÃ©tisation)</small>
         avec la borne
         <math class="tex"><mi mathvariant="normal">n</mi><mo>=</mo><mn>15</mn></math>Â :</p>
      <pre><code class="language-json">true
false
null
"y"
{"D/5-": true}
{"b": true, "A_=M": true}
{"A&amp;&lt;": true, "=8o^": false}
{"WA": true, "};2z": null}
{"r": true, "'*uT": "nRx0"}
{"FyD": true, "i>": [true]}
â€¦</code></pre>
      <p>Au totalÂ : <math class="tex"><mn>356Â 327</mn></math> donnÃ©es
         gÃ©nÃ©rÃ©esÂ !</p>
    </div>
    <div>
      <p>GÃ©nÃ©ration <strong>basÃ©e sur la couverture</strong>Â :</p>
      <ul>
        <li data-item="ğŸ‘">rapide pour des donnÃ©es de taille moyenne ou grande,
            bonne diversitÃ©</li>
        <li data-item="ğŸ‘">ne considÃ¨re pas de taille</li>
      </ul>
      <p class="break">ExempleÂ :</p>
      <pre><code class="language-json">false
null
{"axIy#Y": [true, 0.31260e-87060470]}
{"x6: ": "!_`{", "yi*dj": [true], "2q": [true, true, true]}
{"YM!vgx": true, "DP)": true}</code></pre>
      <p>Toute la grammaire (lexÃ¨mes et rÃ¨gles) est couverteÂ !</p>
    </div>
  </div>
</section>

<section>
  <h1>ConcrÃ©tisation</h1>

  <div id="concretisation" class="verbatim schema"></div>
  <script>
  Hoa.Document.onReady(function ( ) {

      var paper = Hoa.Graph(Hoa.$('#concretisation'), 800, 180);
      var grid  = paper.grid(0, 0, 800, 180, 5, 2);
      var pcre  = grid.push(paper.rect(0, 0, 140, 80, 3, 'PCRE'), 0, 0);
      var ast   = grid.push(paper.rect(0, 0, 140, 80, 3, 'AST'), 2, 0);
      var word  = grid.push(paper.rect(0, 0, 140, 80, 3, 'mot'), 4, 0);
      grid.push(paper.rect(0, 0, 140, 50, 3, '\\w[3-7]+'), 0, 1);
      grid.push(paper.rect(0, 0, 140, 50, 3, '(arbre)'), 2, 1);
      grid.push(paper.rect(0, 0, 140, 50, 3, 'f377'), 4, 1);

      paper.link.between(pcre, ast, 'analyseurs');
      paper.link.between(ast, word, 'gÃ©nÃ©ration isotropique');
  });
  </script>
  <p>LexÃ¨mes exprimÃ©s avec des <a href="http://pcre.org/">PCRE</a></p>
  <p>Analyse les lexÃ¨mes avec la grammaire des PCRE <small>(au format
     PP)</small></p>
  <p>Algorithme de gÃ©nÃ©ration <strong>alÃ©atoire isotropique</strong>Â :</p>
  <ul>
    <li>alÃ©atoire</li>
    <li>uniformitÃ© locale (et non globale)</li>
  </ul>
  <p>AppliquÃ© sur chaque Ã©lÃ©ment d'une sÃ©quence</p>
</section>

<section>
  <h1>SynthÃ¨se</h1>

  <p><em lang="en">Grammar-based Testing</em></p>
  <div class="incremental">
    <ul class="incremental">
      <li data-item="âœ”ï¸"><span class="ğŸ‘">prÃ©dicabilitÃ©</span>Â : grÃ¢ce aux
          analyseurs (lexical et syntaxique)</li>
      <li data-item="âœ”ï¸"><span class="ğŸ‘">gÃ©nÃ©rabilitÃ©</span>Â : grÃ¢ce aux algorithmes
          de gÃ©nÃ©rations et de concrÃ©tisation</li>
    </ul>
    <p class="break">Deux nouveaux domaines rÃ©alistesÂ :
       <code>grammar(<math class="tex"><mi mathvariant="normal">F</mi></math>)</code>
       et
       <code>regex(<math class="tex"><mi mathvariant="normal">R</mi></math>)</code>
       (sucre syntaxiqueÂ :
       <code>/<math class="tex"><mi mathvariant="normal">R</mi></math>/</code>)</p>
    <p class="break">Travaux publiÃ©s dans A-MOST 2012
       <span class="bibliography"><a href="http://dx.doi.org/10.1109/ICST.2012.136">ğŸ“–</a></span></p>

    <p class="break">ğŸ‘‰ Mission suivanteÂ ? Les objetsÂ !</p>
  </div>
</section>

<section>
  <h1>GÃ©nÃ©ration d'objets</h1>

  <p>ObjetÂ : <strong>aggrÃ©gation</strong> d'attributs et de mÃ©thodes, tous deux
     annotÃ©s par des contrats Praspel</p>
  <p class="break">Deux approches pour gÃ©nÃ©rerÂ :</p>
  <ol>
    <li>appeler le constructeur puis les mÃ©thodes pour placer l'objet dans
        l'Ã©tat dÃ©sirÃ©</li>
    <li>appeler le constructeur puis dÃ©finir les attributs de l'objet
        directement <small>(<em lang="en">shunt the
        encapsulation</em>)</small></li>
  </ol>
  <p>Solution retenueÂ : nÂ°2</p>
</section>

<section>
  <h1>Principe</h1>

  <ul>
    <li>gÃ©nÃ©rer les paramÃ¨tres du constructeur Ã  l'aide de sa prÃ©condition
        (<code>@requires</code>)</li>
    <li>pour chaque attribut, gÃ©nÃ©rer une valeur Ã  l'aide de son invariant
       (<code>@invariant</code>)</li>
  </ul>
  <p class="break">BonusÂ : dÃ©tecter les rÃ©fÃ©rences circulaires et rÃ©utiliser des
     objets dÃ©jÃ  gÃ©nÃ©rÃ©s</p>
</section>

<section>
  <h1>SynthÃ¨se</h1>

  <div class="incremental">
    <ul class="incremental">
      <li data-item="âœ”ï¸"><span class="ğŸ‘">prÃ©dicabilitÃ©</span>Â : grÃ¢ce Ã 
          <code class="php">instanceof</code> et <code>@invariant</code></li>
      <li data-item="âœ”ï¸"><span class="ğŸ‘">gÃ©nÃ©rabilitÃ©</span>Â : grÃ¢ce au nouvel
          algorithme</li>
    </ul>
    <p class="break">Un nouveau domaine rÃ©alisteÂ :
       <code>class(<math class="tex"><mi mathvariant="normal">C</mi></math>)</code>
       (sucre syntaxiqueÂ :
       <code>\<math class="tex"><mi mathvariant="normal">C</mi></math></code>
       tout simplement)</p>
    <p class="break">Nous savons gÃ©nÃ©rer efficacement <strong>tous</strong> les
       types de donnÃ©es usuels</p>
    <p class="break">ğŸ‘‰ Mission suivanteÂ ? GÃ©nÃ©rer des tests unitairesÂ !</p>
  </div>
</section>

<section class="chapter">
  <h1>3 <span>GÃ©nÃ©ration automatique de tests unitaires</span></h1>
</section>

<section>
  <h1>Objectifs de tests</h1>

  <p>GÃ©nÃ©rer des tests maisâ€¦ pour tester <strong>quoi</strong>Â ?</p>
  <p>Quels sont nos objectifs de testsÂ ?</p>
  <div class="incremental">
    <p class="break">Couverture du codeÂ ?</p>
    <ul>
      <li>boÃ®te noireÂ : le code <small>(corps des mÃ©thodes)</small> n'est
          <span class="ğŸ‘">pas</span> utilisÃ©</li>
    </ul>
    <p>Couverture des contratsÂ ?</p>
    <ul class="incremental">
      <li>le contrat reflÃ¨te le <strong>comportement des donnÃ©es et du
          code</strong></li>
      <li>idÃ©eÂ nÂ°1Â : couvrir les donnÃ©es</li>
      <li>idÃ©eÂ nÂ°2Â : couvrir la structure du contrat</li>
      <li>hypothÃ¨seÂ :
          couverture du contrat
          <math class="tex"><mover accent="false"><mo>â‰ˆ</mo><mtext>?</mtext></mover></math>
          couverture du code</li>
    </ul>
  </div>
</section>

<section>
  <h1>CritÃ¨re de couvertures sur les contrats</h1>

  <div class="incremental incremental-overlay">
    <div class="incremental">
      <div>
        <p>CritÃ¨re de Couverture de <strong>Clause</strong></p>
        <ul>
          <li>vise Ã  couvrir la structure d'un contrat</li>
        </ul>
      </div>
      <div>
        <p>CritÃ¨re de Couverture de <strong>Domaine</strong></p>
        <ul>
          <li>raffine le CritÃ¨re de Couverture de Clause</li>
          <li>vise Ã  couvrir tous les domaines rÃ©alistes</li>
        </ul>
      </div>
      <div>
        <p>CritÃ¨re de Couverture de <strong>PrÃ©dicat</strong></p>
        <ul>
          <li>similaire au CritÃ¨re de Couverture de Domaine</li>
          <li>vise Ã  couvrir tous les prÃ©dicats
              (construction <code>\pred(<em>p</em>)</code>)</li>
        </ul>
      </div>
    </div>
    <div>
      <p><strong>Combinaisons</strong> (treillis)</p>
      <div class="schema">
        <svg width="600" height="300" viewBox="0 0 600 300"
             class="draw incremental">

          <g>
            <text x="100" y="290" class="southğŸ“Œ">Couverture Domaine</text>
            <text x="300" y="290" class="southğŸ“Œ">Couverture Clause</text>
            <text x="500" y="290" class="southğŸ“Œ">Couverture PrÃ©dicat</text>
          </g>

          <g>
            <text x="200" y="140" class="middleğŸ“Œ">Couverture</text>
            <text x="200" y="160" class="middleğŸ“Œ">ClauseÂ +Â Domaine</text>
            <text x="400" y="140" class="middleğŸ“Œ">Couverture</text>
            <line x1="180" y1="180" x2="120" y2="250" marker-end="url(#arrowHead)" />
            <line x1="220" y1="180" x2="280" y2="250" marker-end="url(#arrowHead)" />

            <text x="400" y="160" class="middleğŸ“Œ">ClauseÂ +Â PrÃ©dicat</text>
            <line x1="380" y1="180" x2="320" y2="250" marker-end="url(#arrowHead)" />
            <line x1="420" y1="180" x2="480" y2="250" marker-end="url(#arrowHead)" />
          </g>

          <g>
            <switch>
              <foreignObject x="230" y="5" width="300" height="30"
                             requiredExtensions="http://www.w3.org/1999/xhtml">
                <style>p { font-size: 1.05em }</style>
                <p>Couverture
                   <em lang="en">All</em>-<math class="tex"><mi mathvariant="normal">G</mi></math></p>
              </foreignObject>
              <text x="300" y="10" class="northğŸ“Œ">Couverture All-G</text>
            </switch>
            <line x1="280" y1="45" x2="220" y2="115" marker-end="url(#arrowHead)" />
            <line x1="320" y1="45" x2="380" y2="115" marker-end="url(#arrowHead)" />
          </g>
        </svg>
      </div>
    </div>
  </div>
</section>

<section>
  <h1>Suite de tests unitaires</h1>

  <ol>
    <li>choix d'un critÃ¨re de couverture de contrat</li>
    <li>gÃ©nÃ©ration d'une suite de tests satisfaisants le critÃ¨re</li>
  </ol>
  <p class="break">Comment l'exÃ©cuterÂ ?</p>
  <ul>
    <li>Praspel sait le faire avec son RAC maisâ€¦</li>
    <li>â€¦ l'isolation des tests, les rapports, l'intÃ©gration aux multiples
        outils etc. nÃ©cessitent un temps de dÃ©veloppement et de maintenance
        importantÂ !</li>
  </ul>
  <p class="break">IdÃ©eÂ : transformer les suites de tests Praspel en suites
     Ã©crites avec l'API d'<a href="http://atoum.org/">atoum</a></p>
</section>

<section>
  <h1>Pourquoi atoumÂ ?</h1>

  <p class="ğŸ‘">Les plusÂ :</p>
  <ul>
    <li><em lang="en">framework</em> de tests de plus en plus utilisÃ© dans
        l'industrie</li>
    <li>simple, moderne et intuitif</li>
    <li>gratuit et <em lang="en">open-source</em></li>
    <li>intÃ©grÃ© ou inclu dans plusieurs IDE et outils majeurs
        <small>(<a href="https://netbeans.org/">Netbeans</a>,
        <a href="http://eclipse.org/">Eclipse</a>,
        <a href="http://vim.org/">Vim</a>,
        <a href="http://travis-ci.com/">Travis-CI</a>,
        <a href="http://jenkins-ci.org/">Jenkins</a>,
        <a href="https://coveralls.io/">Coveralls</a>â€¦)</small></li>
    <li>multiples sortes d'exÃ©cutions et formats de rapports</li>
    <li><em lang="en">hackable</em></li>
  </ul>
  <p class="ğŸ‘">Les moinsÂ :</p>
  <ul>
    <li>pas de gÃ©nÃ©rateur automatique de donnÃ©es</li>
    <li>pas de contrat</li>
  </ul>
</section>

<section class="chapter">
  <h1>4 <span>Extension<br /><small><code>atoum/praspel-extension</code></span></small></h1>
</section>

<section>
  <h1>FonctionnalitÃ©s</h1>

  <p>Nouvelle extension dans atoum <code>atoum/praspel-extension</code>Â :</p>
  <ol>
    <li>exposer les domaines rÃ©alistes</li>
    <li>exposer les gÃ©nÃ©rateurs automatiques de donnÃ©es</li>
    <li>transformer des contrats Praspel en suites de tests atoum</li>
  </ol>
  <p class="break">InstallerÂ :</p>
  <pre><code class="language-shell">$ composer require atoum/praspel-extension *
$ composer install</code></pre>
  <pre><code class="language-php">// .atoum.php
$runner->addExtension(new \Atoum\PraspelExtension\Manifest());</code></pre>
</section>

<section>
  <h1>Des nouveaux Â«Â <em lang="en">asserters</em>Â Â»</h1>

  <div class="incremental incremental-overlay">
    <div>
      <ul>
        <li><code>realdom</code> pour crÃ©er des <strong>disjonctions de domaines
           rÃ©alistes</strong></li>
      </ul>
      <pre><code class="language-php">$interval = $this->realdom->boundinteger(7, 13)
                          ->or
                          ->boundinteger(42, 153);</code></pre>
    </div>
    <div>
      <ul>
        <li><code>realdom</code> pour crÃ©er des <strong>disjonctions de domaines
           rÃ©alistes</strong></li>
        <li><code>sample</code> pour gÃ©nÃ©rer <strong>une</strong> donnÃ©e</li>
      </ul>
      <pre><code class="language-php">$interval = $this->realdom->boundinteger(7, 13)
                          ->or
                          ->boundinteger(42, 153);

var_dump(
    $this->sample($interval)
); // int(84)</code></pre>
    </div>
    <div>
      <ul>
        <li><code>realdom</code> pour crÃ©er des <strong>disjonctions de domaines
           rÃ©alistes</strong></li>
        <li><code>sample</code> pour gÃ©nÃ©rer <strong>une</strong> donnÃ©e</li>
        <li><code>sampleMany</code> pour gÃ©nÃ©rer <strong>plusieurs</strong>
            donnÃ©es</li>
      </ul>
      <pre><code class="language-php">$interval = $this->realdom->boundinteger(7, 13)
                          ->or
                          ->boundinteger(42, 153);

foreach($this->sampleMany($interval, 1024) as $i)
    $this->integer($i)->isGreaterThan(7);</code></pre>
    </div>
    <div>
      <ul>
        <li><code>realdom</code> pour crÃ©er des <strong>disjonctions de domaines
           rÃ©alistes</strong></li>
        <li><code>sample</code> pour gÃ©nÃ©rer <strong>une</strong> donnÃ©e</li>
        <li><code>sampleMany</code> pour gÃ©nÃ©rer <strong>plusieurs</strong>
            donnÃ©es</li>
        <li><code>predicate</code> pour vÃ©rifier qu'une donnÃ©e
            <strong>appartient</strong> Ã  une disjonction de domaines
            rÃ©alistes</li>
      </ul>
      <pre><code class="language-php">$interval = $this->realdom->boundinteger(7, 13)
                          ->or
                          ->boundinteger(42, 153);

var_dump($this->predicate(21, $interval)); // boolean(false)
var_dump($this->predicate(42, $interval)); // boolean(true)</code></pre>
    </div>
  </div>
</section>

<section>
  <h1>Exemples</h1>

  <p>GÃ©nÃ©rer une chaÃ®ne de caractÃ¨res Ã  partir d'une expression rÃ©guliÃ¨reÂ :</p>
  <pre><code class="language-php">$realdom = $this->realdom->regex('/[\w\-_]+(\.[\w\-\_]+)*@\w+\.(net|org)/');
$this->string($this->sample($realdom))
     ->contains(â€¦)->â€¦;</code></pre>
  <p>GÃ©nÃ©rer des dates relativesÂ :</p>
  <pre><code class="language-php">$realdom = $this->realdom->date(
    'd/m H:i',
    $this->realdom->boundinteger(
        $this->realdom->timestamp('yesterday'),
        $this->realdom->timestamp('next Monday')
    )
);

foreach($this->sampleMany($realdom, 10) as $date)
    var_dump($date);</code></pre>
</section>

<section>
  <h1>GÃ©nÃ©rer des suites de tests</h1>

  <p>Classe <code>Project\HelloWorld</code></p>
  <p class="break">GÃ©nÃ©rer la suite de testsÂ :</p>
  <pre><code class="language-shell">$ praspel generate --class 'Project\HelloWorld' --test-root .</code></pre>
  <p class="break">ExÃ©cuter la suite de testsÂ :</p>
  <pre><code class="language-shell">$ atoum --files Path/To/Our/Generated/Test.php
> Total test duration: 0.01 second.
> Total test memory usage: 0.50 Mb.
> Code coverage value: 100.00%
> Running duration: 0.06 second.
> Success (1 test, 1/1 method, 0 void method,
           0 skipped method, 1 assertion)!</code></pre>
</section>

<section>
  <h1>Exemples dans Hoa</h1>

  <p>Contient des contrats <strong>et</strong> des tests manuels</p>
  <p>Commandes <code>hoa test:<em>*</em></code> basÃ©es sur les API de
     l'extension <code>atoum/praspel-extension</code></p>
  <p class="break">Pour gÃ©nÃ©rer les tests de la classe
     <code>Hoa\Math\Util</code>Â :</p>
  <pre><code class="language-shell">$ hoa test:generate --classes Hoa.Math.Util</code></pre>
  <p>puisÂ :</p>
  <pre><code class="language-shell">$ hoa test:run --namespaces Hoa.Math</code></pre>
  <p>Et le tour est jouÃ©Â !</p>
</section>

<section class="chapter">
  <h1>5 <span>Conclusion</span></small></h1>
</section>

<section>
  <h1><em lang="lt">Recapitulare</em></h1>

  <div class="incremental incremental-overlay">
    <div>
      <p>ImplÃ©mentÃ© dans <a href="http://hoa-project.net/">Hoa</a>Â :</p>
      <ul>
        <li>un ensemble de bibliothÃ¨ques PHP modulaires, extensibles et
            structurÃ©es</li>
        <li>un pont entre le monde de la recherche et de l'industrie</li>
        <li>gratuit et <em lang="en">open-source</em></li>
      </ul>
      <p class="break">Domaines rÃ©alistes
         (<a href="http://central.hoa-project.net/Resource/Library/Realdom"><code>Hoa\Realdom</code></a>)Â :</p>
      <ul>
        <li>des structures permettant de valider et gÃ©nÃ©rer des donnÃ©es</li>
        <li>peuvent Ãªtre emboÃ®tÃ©es et Ã©tendus facilement</li>
      </ul>
    </div>
    <div>
      <p>Praspel
         (<a href="http://central.hoa-project.net/Resource/Library/Praspel"><code>Hoa\Praspel</code></a>)Â :</p>
      <ul>
        <li>nouveau langage de contrat pour PHP, simple, pragmatique et
            extensible</li>
        <li><em lang="en">Contract-based Testing</em>Â : gÃ©nÃ©ration automatique
            de donnÃ©es et de suites de tests unitaires</li>
        <li><em lang="en">Random-</em>,
            <em lang="en">Solver-</em> et
            <em lang="en">Grammar-based Testing</em>
            (<a href="http://central.hoa-project.net/Resource/Library/Compiler"><code>Hoa\Compiler</code></a>
            et
            <a href="http://central.hoa-project.net/Resource/Library/Regex"><code>Hoa\Regex</code></a>),
            assemblÃ©s dans Praspel, plongÃ©s dans les domaines rÃ©alistes</li>
      </ul>
      <p class="break">Extension atoum
         (<a href="http://central.hoa-project.net/Resource/Contributions/Atoum/PraspelExtension"><code>atoum/praspel-extension</code></a>)Â :</p>
      <ul>
        <li>pour utiliser les outils de Praspel dans atoum</li>
      </ul>
    </div>
  </div>
</section>

<section>
  <h1>Publications</h1>

  <p>Articles scientifiques en confÃ©rences internationalesÂ :</p>
  <ul>
    <li><a href="http://hoa-project.net/Event/Cstva13.html"><cite lang="en">A
        Constraint Solver for PHP Arrays</cite></a>, prÃ©sentÃ© Ã  CSTVA en 2013
        <span class="bibliography"><a href="http://dx.doi.org/10.1109/ICSTW.2013.80">ğŸ“–</a></span></li>
    <li><a href="http://hoa-project.net/Event/Amost12.html"><cite lang="en">Grammar-Based
        Testing using Realistic Domains in PHP</cite></a>, prÃ©sentÃ© Ã 
        A-MOST en 2012
        <span class="bibliography"><a href="http://dx.doi.org/10.1109/ICST.2012.136">ğŸ“–</a></span></li>
    <li><cite lang="en">Praspel: A Specification Language for Contract-Driven
        Testing in PHP</cite>, prÃ©sentÃ© Ã  ICTSS en 2011
        <span class="bibliography"><a href="http://dx.doi.org/10.1007/978-3-642-24580-0_6">ğŸ“–</a></span></li>
  </ul>
  <p class="break">Un journal en attente (75% acceptÃ©)</p>
  <p class="break">ThÃ¨se soutenue trÃ¨s prochainement ğŸ˜±</p>
</section>

<section>
  <h1>Et aprÃ¨sÂ ?</h1>

  <div class="incremental">
    <div>
      <p>ApprentissageÂ :</p>
      <ul>
        <li>thÃ¨seÂ <math class="tex"><mo>=</mo></math>Â documentationÂ : besoin d'une
            documentation Â«Â utilisateurÂ Â»</li>
      </ul>
    </div>
    <div>
      <p>GÃ©nÃ©rateurs de donnÃ©esÂ :</p>
      <ul>
        <li>toutes les expÃ©rimentations valident nos algorithmes</li>
        <li>matures</li>
        <li>dÃ©jÃ  utilisables, mÃªme dans atoum</li>
      </ul>
    </div>
    <div>
      <p>GÃ©nÃ©rateurs de tests unitairesÂ :</p>
      <ul>
        <li>plusieurs expÃ©rimentations trÃ¨s encourageantes</li>
        <li>besoin de maturitÃ©</li>
        <li>besoin d'amÃ©liorer/complÃ©ter les outils</li>
      </ul>
    </div>
  </div>
</section>

<section class="chapter">
  <h1>MerciÂ ! <span>â˜ºï¸</span></h1>

  <p class="tcenter">
    <a href="http://hoa-project.net/">hoa-project.net</a>
    <br />
    <a href="https://twitter.com/hoaproject">@hoaproject</a>
  </p>
</section>

<div id="progress-bar"></div>

<script src="http://static.hoa-project.net/Javascript/Keynote.js"></script>
<script src="Keynote.js"></script>
<script src="http://static.hoa-project.net/Javascript/Prism.js"></script>
<script src="http://static.hoa-project.net/Javascript/Prism.hoa.js"></script>
<script src="http://static.hoa-project.net/Javascript/Prism.plugin.line.js"></script>
<script src="http://static.hoa-project.net/Javascript/Hoa.Graph.js"></script>
<script src="Hoa.Graph.js"></script>
<script src="http://static.hoa-project.net/Javascript/Hoa.Graph.style.js"></script>
<script>
  Hoa.namespace([HTMLElement], {

      guard: function ( element ) {

          return 'PRE' === element.tagName;
      },
      body : function ( element ) {

          return {

              highlightLines: function ( lines ) {

                  if(undefined === lines)
                      element.setAttribute('data-line', 1 << 20);
                  else
                      element.setAttribute('data-line', lines);

                  Prism.hooks.run(
                      'after-highlight',
                      {
                          element: element.querySelector('code')
                      }
                  );
              }
          };
      }
  });
</script>

</body>
</html>
